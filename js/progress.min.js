"use strict";function progressUpdate(t,e,n,r,s,a){dotclear.servicesPost("postProgress",(t=>{const e=(new DOMParser).parseFromString(t,"text/xml");update(e)}),{funcClass:t,funcMethod:e,pos:n,start:r,stop:s,baseInc:a,total_elapsed:0})}function humanReadableTime(t){const e=new Date(1e3*t),n=e.getUTCHours(),r=e.getUTCMinutes(),s=e.getSeconds();let a="";return n&&(a+=`${n.toString().padStart(2,"0")}:`),a+=`${r.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`,a}function update(t){if("ok"!=$(t).find("rsp").attr("status"))return;if(0!=$(t).find("error").length)return void window.alert("error: %s",$(t).find("error").text());if(0!=$(t).find("return").length)return $("#return").show(),void $("#next").hide();const e=$(t).find("percent").text();$("#percent").empty(),$("#percent").append(e);const n=$(t).find("eta").text();$("#eta").empty(),$("#eta").append(humanReadableTime(n)),dotclear.servicesPost("postProgress",(t=>{const e=(new DOMParser).parseFromString(t,"text/xml");update(e)}),{funcClass:$(t).find("funcClass").text(),funcMethod:$(t).find("funcMethod").text(),pos:$(t).find("pos").text(),start:$(t).find("start").text(),stop:$(t).find("stop").text(),baseInc:$(t).find("baseinc").text(),total_elapsed:$(t).find("total_elapsed").text()})}
